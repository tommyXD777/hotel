<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gesti√≥n Hotelera</title>
    <link rel="icon" href="{{ url_for('static', filename='img/logo.png') }}" type="image/png">

    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
    </style>
</head>
<body class="bg-gray-100 font-sans">
    <div id="notificationContainer" class="notification-container"></div>

    <div class="container mx-auto p-4">
        
        <!-- Tablero tipo mapa -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-2xl font-semibold text-gray-800">üó∫Ô∏è Tablero de Habitaciones</h2>
            </div>
            
            <div class="room-grid">
                {% for room in rooms %}
                    <div class="room-cell 
                        {% if room.estado == 'libre' %}room-libre
                        {% elif room.estado == 'ocupada' and room.dias_ocupada <= 1 %}room-ocupada
                        {% elif room.estado == 'ocupada' and room.dias_ocupada > 1 %}room-varias-noches
                        {% elif room.estado == 'reservado' %}room-reservado
                        {% elif room.estado == 'mensualidad' %}room-mensualidad
                        {% elif room.estado == 'mantenimiento' %}room-mantenimiento
                        {% endif %}"
                        onclick="manejarClickHabitacion(...)">
                        
                        <!-- Modificado para mostrar "rato" cuando dias_ocupada == 0 -->
                        {% if (room.estado == 'ocupada' or room.estado == 'mensualidad') and room.dias_ocupada is not none %}
                            <div class="days-counter">
                                {% if room.dias_ocupada == 0 %}rato{% else %}{{ room.dias_ocupada }}d{% endif %}
                            </div>
                        {% endif %}
                        
                        <div class="text-lg font-bold">{{ room.numero }}</div>
                        <div class="text-xs text-center opacity-90">{{ room.descripcion[:12] }}...</div>
                        
                    </div>
                {% endfor %}
            </div>
        </div>

        <!-- Enhanced room grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            {% for room in rooms %}
                <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow">
                    <div class="p-4 {{ 'bg-green-50 border-l-4 border-green-500' if room.estado == 'libre' else 'bg-red-50 border-l-4 border-red-500' if room.estado == 'ocupada' and room.dias_ocupada <= 1 else 'bg-pink-50 border-l-4 border-pink-500' if room.estado == 'ocupada' and room.dias_ocupada > 1 else 'bg-blue-50 border-l-4 border-blue-500' if room.estado == 'reservado' else 'bg-yellow-50 border-l-4 border-yellow-500' if room.estado == 'mensualidad' else 'bg-gray-50 border-l-4 border-gray-500' }}">
                        <div class="flex justify-between items-center mb-2">
                            <h3 class="text-xl font-bold text-gray-800">üè† Habitaci√≥n {{ room.numero }}</h3>
                            <div class="flex items-center gap-2">
                                <!-- Modificado para mostrar "rato" cuando dias_ocupada == 0 -->
                                {% if (room.estado == 'ocupada' or room.estado == 'mensualidad') and room.dias_ocupada is not none %}
                                    <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full font-semibold">
                                        {% if room.dias_ocupada == 0 %}
                                            rato
                                        {% else %}
                                            {{ room.dias_ocupada }} d√≠a{% if room.dias_ocupada != 1 %}s{% endif %}
                                        {% endif %}
                                    </span>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>

    <script>
    </script>
</body>
</html>
